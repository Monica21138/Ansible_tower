---
- name: Patch Linux system
  hosts: node1
  remote_user: ansible
  become: true
  
  tasks:
    - name: Check Apache is running or not
      shell: systemctl status httpd >/dev/null 2>&1; if [ $? -eq 0 ]; then echo 'httpd is running'; else echo 'httpd in not running'; fi
    - name: Check RHN or local repository connectivity
      shell:  yum repolist  > /dev/null 2>&1; if [ $? -eq 0 ]; then echo "Repository found..Ready to apply patch"; else echo "System is not reqisterred ! No repository found.."; fi

    - name: Apply patch
      shell: yum update -y
      
